<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Test</title>
        <script src="../underscore-min.js" type="text/javascript"></script>
        <script src="../jquery.min.js" type="text/javascript"></script>
        <script src="../abxy/abxy.js" type="text/javascript"></script>
        <script type="text/javascript">
            var main_loop = function(game) {
                game.Update();
                game.Draw();

                setTimeout(function() { main_loop(game); }, 1000.0 / 60.0);
            };

            $(function() {
                ABXY.Startup({ root: "../abxy" });
                ABXY.OnLoad(function() {
                    var spriteentity = ABXY.entity2d.Extend({
                        Init: function(name, sprite, x, y) {
                            this._super(name, x, y);

                            this.sprite = new ABXY.sprite(sprite);
                        },

                        Draw: function(context) {
                            context.save();

                            this.Transform(context);

                            this.sprite.Draw(context);

                            context.restore();
                        },
                    });

                    var canvas = $("#canvas")[0];
                    var game = new ABXY.game("game", canvas, {
                        width: 800,
                        height: 600,
                    });

                    var main_stage = new ABXY.worldstage("stage");

                    var sprite = new spriteentity("test1", "img/glitch_00.png", 0, 0);
                    var sprite2 = new spriteentity("test2", "img/glitch_00.png", 20, 0);

                    main_stage.world.AddEntity(sprite);
                    main_stage.world.AddEntity(sprite2);

                    game.SetStage(main_stage);

                    main_loop(game);
                });
            });
        </script>
    </head>
    <body>
        <canvas id="canvas">
            Your browser doesn't support this. :(
        </canvas>
    </body>
</html>
